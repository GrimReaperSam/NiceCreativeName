<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Browse by Years</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://js.arcgis.com/3.23/esri/css/esri.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="http://piotrkrosniak.github.io/simple-slider.js"></script>
  <link href="http://piotrkrosniak.github.io/simple-slider.css" rel="stylesheet" type="text/css" />
  <link href="http://piotrkrosniak.github.io/simple-slider-volume.css" rel="stylesheet" type="text/css" />
  <script src="https://js.arcgis.com/3.23/"></script>
  <script src="terraformer.min.js"></script>
  <script src="terraformer-arcgis-parser.js"></script>
  <script src="year-map.js"></script>
  <link href="http://piotrkrosniak.github.io/default.css" rel="stylesheet" type="text/css" media="all" />
  <link href="http://piotrkrosniak.github.io/fonts.css" rel="stylesheet" type="text/css" media="all" />
  <!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
</head>

<body>
  <div id="header-wrapper">
    <div id="header" class="container">
      <div id="logo">
        <h2>
          Browse by Years
        </h2>
      </div>
      <div id="menu">
      </div>
    </div>
    <br/>
    <div id="map" class="map" style="width: 1200px; height: 400px; margin: 0px auto; position: relative;">
      <div id="swipeDiv"></div>
    </div>
    <table>
      <tr>
        <td>
          <div name="left-slider" style="padding: 20px; position: relative;">
            <h4>
              <div id="left-year">Left: 2011</div>
            </h4>
            <input data-slider="true" data-slider-values="2011,2012,2013,2015,2017" data-slider-highlight="true" data-slider-snap="true"
              type="text">
          </div>
        </td>
        <td>
          <div name="right-slider">
            <h4>
              <div id="right-year">Right: 2017</div>
            </h4>
            <input data-slider="true" data-slider-values="2011,2012,2013,2015,2017" value="2017" data-slider-highlight="true" data-slider-snap="true"
              type="text">
          </div>
        </td>
      </tr>
    </table>
    <script>
      $("[data-slider]")
        .each(function () {
          var input = $(this);
        })
        .bind("slider:changed", function (event, data) {
          year = data.value.toFixed(0);
          if ($(this).parent().attr("name").includes("left")) {
            $("#left-year").html("Left: " + year);
            changeLayer(year, true);
          }
          else {
            $("#right-year").html("Right: " + year);
            changeLayer(year, false);
          }
        });

      function changeLayer(year, isLeft) {
        if (isLeft)
          layerL = layersLeft[year];
        else
          layerR = layersRight[year];

        map.removeAllLayers();
        map.addLayers([layerR, layerL]);
        swipe.layers = [layerL];
        //swipe.startup();
      }
    </script>
  </div>
</body>

</html>